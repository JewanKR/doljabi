{"version":3,"file":"page-DAYD6i5Y.js","sources":["../../src/pages/omok/create-room/page.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { createRoom, getSessionKey, type CreateRoomPayload } from '../../../api/authClient';\n\nexport default function OmokCreateRoom() {\n  const navigate = useNavigate();\n  const [status, setStatus] = useState<string>('방 생성 중...');\n\n  useEffect(() => {\n    const initGame = async () => {\n      // 1. 세션 키 확인\n      const sessionKey = getSessionKey();\n      if (!sessionKey) {\n        alert('로그인이 필요합니다.');\n        navigate('/login');\n        return;\n      }\n\n      try {\n        // 2. 방 생성 요청 Payload 구성\n        const payload: CreateRoomPayload = {\n          game_type: 'omok',\n          game_config: {\n            main_time: 600,        // 10분\n            fischer_time: 5,       // 피셔 5초\n            overtime: 30,          // 초읽기 30초\n            remaining_overtime: 3  // 초읽기 3회\n          }\n        };\n\n        // 3. API 호출\n        const result = await createRoom(payload);\n\n        if (result.status === 201 && result.data) {\n          const enterCode = result.data.enter_code;\n          \n          // 4. 성공 시 대기실로 이동\n          // openapi.json의 /room/{enter_code}/session/{session_key} 에 대응하기 위해\n          // enter_code를 대기실로 전달합니다. session_key는 authClient에 저장되어 있습니다.\n          navigate('/omok/waiting-room', { \n            state: { \n              roomCode: enterCode.toString(),\n              isHost: true\n            } \n          });\n        } else {\n          setStatus(`방 생성 실패: ${result.message}`);\n          setTimeout(() => navigate('/'), 2000);\n        }\n      } catch (error) {\n        console.error(error);\n        setStatus('네트워크 오류가 발생했습니다.');\n        setTimeout(() => navigate('/'), 2000);\n      }\n    };\n\n    initGame();\n  }, [navigate]);\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center text-white\" style={{ backgroundColor: '#0b0c10' }}>\n      <div className=\"text-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-400 mx-auto mb-4\"></div>\n        <h2 className=\"text-xl font-semibold\">{status}</h2>\n      </div>\n    </div>\n  );\n}\n"],"names":["OmokCreateRoom","navigate","useNavigate","status","setStatus","useState","useEffect","getSessionKey","result","createRoom","enterCode","error","jsx","jsxs"],"mappings":"+DAIA,SAAwBA,GAAiB,CACvC,MAAMC,EAAWC,EAAA,EACX,CAACC,EAAQC,CAAS,EAAIC,EAAAA,SAAiB,WAAW,EAExDC,OAAAA,EAAAA,UAAU,IAAM,EACG,SAAY,CAG3B,GAAI,CADeC,EAAA,EACF,CACf,MAAM,aAAa,EACnBN,EAAS,QAAQ,EACjB,MACF,CAEA,GAAI,CAaF,MAAMO,EAAS,MAAMC,EAXc,CACjC,UAAW,OACX,YAAa,CACX,UAAW,IACX,aAAc,EACd,SAAU,GACV,mBAAoB,CAAA,CACtB,CAIqC,EAEvC,GAAID,EAAO,SAAW,KAAOA,EAAO,KAAM,CACxC,MAAME,EAAYF,EAAO,KAAK,WAK9BP,EAAS,qBAAsB,CAC7B,MAAO,CACL,SAAUS,EAAU,SAAA,EACpB,OAAQ,EAAA,CACV,CACD,CACH,MACEN,EAAU,YAAYI,EAAO,OAAO,EAAE,EACtC,WAAW,IAAMP,EAAS,GAAG,EAAG,GAAI,CAExC,OAASU,EAAO,CACd,QAAQ,MAAMA,CAAK,EACnBP,EAAU,kBAAkB,EAC5B,WAAW,IAAMH,EAAS,GAAG,EAAG,GAAI,CACtC,CACF,GAEA,CACF,EAAG,CAACA,CAAQ,CAAC,EAGXW,EAAAA,IAAC,MAAA,CAAI,UAAU,2DAA2D,MAAO,CAAE,gBAAiB,SAAA,EAClG,SAAAC,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAD,EAAAA,IAAC,MAAA,CAAI,UAAU,6EAAA,CAA8E,EAC7FA,EAAAA,IAAC,KAAA,CAAG,UAAU,wBAAyB,SAAAT,CAAA,CAAO,CAAA,CAAA,CAChD,CAAA,CACF,CAEJ"}